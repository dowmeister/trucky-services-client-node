# Trucky App REST API client for node.js

[![Build Status](https://travis-ci.org/shardick/trucky-services-client-node.svg?branch=master)](https://travis-ci.org/shardick/trucky-services-client-node)

[![npm version](https://badge.fury.io/js/trucky-services-client.svg)](https://badge.fury.io/js/trucky-services-client) 

This package is the Trucky API client, complete gateway to TruckersMP, ETS2Map and Traffic data served from TruckersMP developers community (official and unofficial).

For API response documentation please refer to **live documentation (<http://api.truckyapp.com/docs/>)**

## Installation

npm install trucky-services-client

## Usage

```javascript
var TruckyAPIClient = require('trucky-services-client');

var api = new TruckyAPIClient();
api.servers().then((response) => {
    console.log(response);
});

api.pois().then(function(response) {
    console.log(response);
});

api.resolveVanityUrl("dowmeister").then( (response) => {
    console.log(response);
});
```

## Dependencies

-   [node-fetch](https://github.com/bitinn/node-fetch): A light-weight module that brings window.fetch to node.js and io.js

# API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [TruckyAPIClient](#truckyapiclient)
    -   [resolveVanityUrl](#resolvevanityurl)
    -   [getPlayerSummaries](#getplayersummaries)
    -   [searchPlayer](#searchplayer)
    -   [pois](#pois)
    -   [isOnline](#isonline)
    -   [getFriends](#getfriends)
    -   [news](#news)
    -   [ets2News](#ets2news)
    -   [atsNews](#atsnews)
    -   [update_info](#update_info)
    -   [events](#events)
    -   [servers](#servers)
    -   [game_version](#game_version)
    -   [game_time](#game_time)
    -   [rules](#rules)
    -   [player](#player)
    -   [bans](#bans)
    -   [traffic](#traffic)
    -   [traffic_servers](#traffic_servers)
    -   [wot_gallery_random](#wot_gallery_random)
    -   [wot_gallery_editorspick](#wot_gallery_editorspick)
    -   [wot_gallery_bestrated](#wot_gallery_bestrated)
    -   [wot_gallery_mostviewed](#wot_gallery_mostviewed)
    -   [streams_twitch_ets2](#streams_twitch_ets2)
    -   [streams_twitch_ats](#streams_twitch_ats)
    -   [truckersfm_listeners](#truckersfm_listeners)
    -   [truckersfm_shows](#truckersfm_shows)
    -   [truckersfm_lastPlayed](#truckersfm_lastplayed)
    -   [onlineList](#onlinelist)
-   [TruckyAPIResponse](#truckyapiresponse)

## TruckyAPIClient

Trucky API client class

### resolveVanityUrl

Resolve Steam Vanity Url returning Steam player data if found

**Parameters**

-   `username` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Steam user vanity url

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[TruckyAPIResponse](#truckyapiresponse)>** 

### getPlayerSummaries

Returns Steam Player data if found

**Parameters**

-   `steamid` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Steam User ID

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[TruckyAPIResponse](#truckyapiresponse)>** 

### searchPlayer

Search player by Steam ID, Steam Username or TruckersMP ID based on searchType parameter

**Parameters**

-   `searchTerm` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Search Term, can be TruckersMP User ID, Steam User ID or Steam Vanity url
-   `searchType` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Can be "steamid", "truckersmpid", "steamusername"

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[TruckyAPIResponse](#truckyapiresponse)>** 

### pois

Get ETS2Map Points of interest

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[TruckyAPIResponse](#truckyapiresponse)>** 

### isOnline

Check TruckersMP player online status

**Parameters**

-   `playerID` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** TruckersMP User ID

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[TruckyAPIResponse](#truckyapiresponse)>** 

### getFriends

Get Steam Friends

**Parameters**

-   `steamID` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Steam User ID

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[TruckyAPIResponse](#truckyapiresponse)>** 

### news

Get TruckersMP news feed from Steam RSS

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[TruckyAPIResponse](#truckyapiresponse)>** 

### ets2News

Get ETS2 News feed from Steam RSS

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[TruckyAPIResponse](#truckyapiresponse)>** 

### atsNews

Get ATS News feed from Steam RSS

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[TruckyAPIResponse](#truckyapiresponse)>** 

### update_info

Get TruckersMP current update info and current plugin version

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[TruckyAPIResponse](#truckyapiresponse)>** 

### events

Get events and meetup from ETS2.com and truckers.events

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[TruckyAPIResponse](#truckyapiresponse)>** 

### servers

Get TruckersMP servers

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[TruckyAPIResponse](#truckyapiresponse)>** 

### game_version

Get TruckersMP game version info

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[TruckyAPIResponse](#truckyapiresponse)>** 

### game_time

Get TruckersMP game time

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[TruckyAPIResponse](#truckyapiresponse)>** 

### rules

Get TruckersMP rules

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[TruckyAPIResponse](#truckyapiresponse)>** 

### player

Get TruckersMP player data

**Parameters**

-   `id` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** TruckersMP User ID

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[TruckyAPIResponse](#truckyapiresponse)>** 

### bans

Get TruckersMP player bans data

**Parameters**

-   `id` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** TruckersMP User ID

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[TruckyAPIResponse](#truckyapiresponse)>** 

### traffic

Get TruckersMP traffic data from traffic.krashnz.com

**Parameters**

-   `server` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** TruckersMP Server short name
-   `game` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Can be "ETS2" or "ATS"

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[TruckyAPIResponse](#truckyapiresponse)>** 

### traffic_servers

Get TruckersMP get traffic servers data from traffic.krashnz.com

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[TruckyAPIResponse](#truckyapiresponse)>** 

### wot_gallery_random

Get World Of Trucks Random Gallery

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[TruckyAPIResponse](#truckyapiresponse)>** 

### wot_gallery_editorspick

Get World Of Trucks Editor's pick

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[TruckyAPIResponse](#truckyapiresponse)>** 

### wot_gallery_bestrated

Get World Of Trucks Best rated

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[TruckyAPIResponse](#truckyapiresponse)>** 

### wot_gallery_mostviewed

Get World Of Trucks most viewed

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[TruckyAPIResponse](#truckyapiresponse)>** 

### streams_twitch_ets2

Get current Twitch streams for ETS2

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[TruckyAPIResponse](#truckyapiresponse)>** 

### streams_twitch_ats

Get current Twitch streams for ATS

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[TruckyAPIResponse](#truckyapiresponse)>** 

### truckersfm_listeners

Get TruckersFM current listeners

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[TruckyAPIResponse](#truckyapiresponse)>** 

### truckersfm_shows

Get TruckersFM current show

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[TruckyAPIResponse](#truckyapiresponse)>** 

### truckersfm_lastPlayed

Get TruckersFM last played song

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[TruckyAPIResponse](#truckyapiresponse)>** 

### onlineList

Get players online state by TruckersMP ids array

**Parameters**

-   `ids`  

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[TruckyAPIResponse](#truckyapiresponse)>** 

## TruckyAPIResponse

Trucky API client response prototype

Type: [object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)

**Properties**

-   `response` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** 
